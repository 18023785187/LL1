!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.ll1=r():t.ll1=r()}(this,(()=>(()=>{"use strict";var t={d:(r,n)=>{for(var e in n)t.o(n,e)&&!t.o(r,e)&&Object.defineProperty(r,e,{enumerable:!0,get:n[e]})},o:(t,r)=>Object.prototype.hasOwnProperty.call(t,r),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},r={};function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}function e(t,r){if(t){if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}function o(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var e,o,a,i,u=[],f=!0,l=!1;try{if(a=(n=n.call(t)).next,0===r){if(Object(n)!==n)return;f=!1}else for(;!(f=(e=a.call(n)).done)&&(u.push(e.value),u.length!==r);f=!0);}catch(t){l=!0,o=t}finally{try{if(!f&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(t,r)||e(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||e(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.r(r),t.d(r,{$:()=>f,EMPTY_CHAIN:()=>i,clearLeftRecursion:()=>p,combineLikeTerms:()=>v,isNotIntersect:()=>S,makeFirstSet:()=>y,makeFollowSet:()=>g,makeLL1:()=>O,makePredictSet:()=>E,makeSelectSet:()=>w,makeUnionFirstSet:()=>d,splitGrammars:()=>h,toGrammars:()=>s});var i=null,u="|",f="$";function l(t,r){return new Set([].concat(a(t),a(r)))}function c(t){return" "===t||"\t"===t||"\n"===t||"\r"===t}function h(t){for(var r=[],n=new Map,e=0;e<t.length;++e){var a=o(t[e].split("->"),2),u=a[0],f=a[1];if(!f||!f.trim())throw new Error("Grammar is missing the right side");var l=!0;n.has(u)||(l=!1,n.set(u,{left:null,right:[]}));var h=n.get(u);h.left=u.trim();var s=[],v="";f+=" ";for(var p=0;p<f.length;++p){var y=f[p];c(y)?("null"===v?s.push(i):v&&s.push(v),v=""):"|"===y?(h.right.push(s),s=[],v=""):v+=y}s.length&&h.right.push(s),!l&&r.push(h)}return r}function s(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];return t.forEach((function(t){var e=t.left,o=t.right;if(r)o.forEach((function(t){var r="";r+="".concat(e," -> ").concat(t.map((function(t){return t+""})).join(" ")),n.push(r)}));else{var a="";a+="".concat(e," -> "),o.forEach((function(t){a+=t.map((function(t){return t+""})).join(" ")+" ".concat(u," ")})),n.push(a.slice(0,-3))}})),n}function v(t){var r=function(t){return t.join(u)},n=[],e=new Map;function o(t,f){e.set(r(f),t);var l,c,h=0,s=!1,v={left:t,right:[]};if(1===f.length)return v.right=function(t){return a(t.map((function(t){return a(t)})))}(f),void n.push(v);for(var p=[],y=0;y<f.length;++y)if(!p.includes(y)){if(p.push(y),y===f.length-1)return void v.right.push(f[y]);var d=f[y],g=0,m=[];m.push(d),l="";t:for(;g<d.length;){c=d[g];var b=!1;if(0===g)for(var w=y+1;w<f.length;++w){var S=f[w][g];S&&(S===c&&(b=!0,p.push(w),m.push(f[w])))}else for(var A=y+1;A<f.length;++A){var j=f[A][g];j&&j===c&&p.includes(A)&&(b=!0)}if(!b)break t;l+=c+u,g++}if(l){var E=m.map((function(t){var r=t.slice(l.slice(0,-1).split(u).length);return r.length?r:[i]})),M=void 0;M=e.has(r(E))?e.get(r(E)):"".concat(t).concat("'".repeat(h),"'");var I=[].concat(a(l.slice(0,-1).split(u)),[M]);v.right.push(I),s||(n.push(v),h++),e.has(r(E))||o(M,E)}else v.right.push(a(f[y])),s||n.push(v);s=!0}}return t.forEach((function(t){var n=t.left,o=t.right;e.set(r(o),n)})),t.forEach((function(t){o(t.left,t.right,new Map)})),n}function p(t){var r=[];return t.forEach((function(t){r.push.apply(r,a(function(t){var r=t.left,n=t.right,e=[],o="".concat(r,"`"),a=[],u=[],f=!1;n.forEach((function(t){t[0]===r?(t.shift(),t.push(o),a.push(t)):t[0]===i?f=!0:(t.push(o),u.push(t))})),f&&u.push([o]);return e.push({left:r,right:[].concat(u)},{left:o,right:[].concat(a,[[i]])}),e}(t)))})),r}function y(t,r){var n,e=function(t){return r.includes(t)||t===i},o={};t.forEach((function(t){var r=t.left;return o[r]=[]}));do{n=!1,t.forEach((function(t){var r=t.left,u=t.right,c=new Set(o[r]),h=c.size;u.forEach((function(t){for(var r=0,n=t[r];(null===(a=n)||void 0===a?void 0:a[0])===f;){var a;n=t[++r]}if(e(n))c.add(n);else if(o[n].includes(i)){do{var u,h=new Set(o[n]);for(h.delete(i),c=l(c,h),n=t[r+=1];(null===(s=n)||void 0===s?void 0:s[0])===f;){var s;n=t[++r]}}while(null!==(u=o[n])&&void 0!==u&&u.includes(i));e(n)?c.add(n):n&&(c=l(c,o[n]))}else c=l(c,o[n])})),o[r]=a(c),h!==c.size&&(n=!0)}))}while(n);return o}function d(t,r,n){var e=[];return t.some((function(t){if(t[0]===f)return!1;if(function(t){return n.includes(t)||t===i}(t))e.push(t);else{if(r[t].includes(i))return!1;e.push.apply(e,a(r[t]))}return!0})),e}function g(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y(t,r),e=function(t){return r.includes(t)||t===i},o={};t.forEach((function(t){var r=t.left;return o[r]=[]})),o[t[0].left].push(f);var u,c=new Set;for(var h in n)n[h].includes(i)&&c.add(h);do{u=!1,t.forEach((function(t){var r=t.left;t.right.forEach((function(t){for(var h=t.length-1;h>=0;--h){var s=t[h];if(!e(s)&&s[0]!==f){var v=o[s].length;if(h===t.length-1)o[s]=a(l(o[s],o[r]));else{for(var p=h+1,y=t[p];p<t.length&&y[0]===f;)y=t[++p];if(e(y))o[s]=a(l(o[s],[y]));else{var d=new Set(n[y]);for(d.delete(i),o[s]=a(l(o[s],d));p<t.length&&(c.has(y)||y[0]===f);)y=t[++p];p===t.length&&(o[s]=a(l(o[s],o[r])))}}o[s].length!==v&&(u=!0)}}}))}))}while(u);return o}function m(t,r){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,r){if(!t)return;if("string"==typeof t)return b(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(t,r)}(t))||r&&t&&"number"==typeof t.length){n&&(t=n);var e=0,o=function(){};return{s:o,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function b(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}function w(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y(t,r),e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g(t,r),o=new Map;return t.forEach((function(t){var a=t.left;t.right.forEach((function(t){for(var u=0,l=t[u],c={left:a,right:t};u<t.length&&l&&l[0]===f;)l=t[++u];l===i?o.set(c,e[a]):o.set(c,d(t,n,r))}))})),o}function S(t){var r,n=new Map,e=m(t);try{for(e.s();!(r=e.n()).done;){var a=o(r.value,2),i=a[0].left,u=a[1];if(n.has(i)){var f=n.get(i),c=l(f,u);if(c.size!==f.size+u.length)return!1;n.set(i,c)}else n.set(i,new Set(u))}}catch(t){e.e(t)}finally{e.f()}return!0}function A(t,r){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,r){if(!t)return;if("string"==typeof t)return j(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(t,r)}(t))||r&&t&&"number"==typeof t.length){n&&(t=n);var e=0,o=function(){};return{s:o,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function j(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}function E(t){if(!S(t))throw new Error("Select set does not satisfy the LL(1) grammar");var r,n=new Map,e=A(t);try{var a=function(){var t=o(r.value,2),e=t[0],a=e.left,i=e.right;t[1].forEach((function(t){n.has(t)||n.set(t,new Map),n.get(t).set(a,i)}))};for(e.s();!(r=e.n()).done;)a()}catch(t){e.e(t)}finally{e.f()}return n}function M(t,r){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,r){if(!t)return;if("string"==typeof t)return I(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(t,r)}(t))||r&&t&&"number"==typeof t.length){n&&(t=n);var e=0,o=function(){};return{s:o,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function I(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}function O(t,r){var n=h(t),e=y(n,r),a=g(n,r,e),i=w(n,r,e,a),u=E(i);return{startSymbol:n[0].left,firstSet:e,followSet:a,selectSet:i,predictSet:u,print:function(){var t,r=[],n=[],a=2,i=M(u);try{for(i.s();!(t=i.n()).done;){var f=o(t.value,1)[0];n.push(f),a=Math.max(a,f.length+2)}}catch(t){i.e(t)}finally{i.f()}for(var l in e)r.push(l),a=Math.max(a,l.length+2);for(var c=new Array(r.length+1).fill([]).map((function(){return new Array(n.length+1).fill("")})),h=0;h<n.length;++h)c[0][h+1]=n[h];for(var s=0;s<r.length;++s)c[s+1][0]=r[s];var v,p=M(u);try{for(p.s();!(v=p.n()).done;){var y,d=o(v.value,2),g=d[0],m=d[1],b=c[0].indexOf(g),w=void 0,S=M(m);try{for(S.s();!(y=S.n()).done;){for(var A=o(y.value,2),j=A[0],E=A[1],I=0;I<r.length;++I)if(c[I+1][0]===j){w=I+1;break}c[w][b]="-> ".concat(E.map((function(t){return t+""})).join(" ")),a=Math.max(a,c[w][b].length+2)}}catch(t){S.e(t)}finally{S.f()}}}catch(t){p.e(t)}finally{p.f()}for(var O="",x="\n"+("|"+"-".repeat(a+2)).repeat(n.length+1)+"|\n",k=0;k<c.length;++k){O+=x+"|";for(var T=0;T<c[k].length;++T){var L=0===k||0===T?" [33;1m "+c[k][T]+" [0m ":" [32;1m "+c[k][T]+" [0m ";O+=L+" ".repeat(a+13-L.length)+"|"}}O+=x,console.log(O)}}}return r})()));
//# sourceMappingURL=ll1.min.js.map